function init(){var e=new ymaps.Map("map",{center:[59.93928755,30.32950326],zoom:16,controls:["zoomControl","fullscreenControl"]});e.behaviors.disable(["scrollZoom"]);var t=new ymaps.Placemark([59.93866336,30.32307596],{},{iconLayout:"default#image",iconImageHref:"img/pin.svg",iconImageSize:[80,140],iconImageOffset:[-40,-140],iconShadow:!0,iconShadowImageHref:"img/pin-shadow.png",iconShadowImageSize:[182,110],iconShadowImageOffset:[0,-110]});e.geoObjects.add(t)}ymaps.ready(init);for(var sliderToggles=document.querySelectorAll(".slider__toggle"),slides=document.querySelectorAll(".slider__item"),currentToggle=document.querySelector(".slider__toggle--current"),currentSlide=document.querySelector(".slider__item--current"),addToggledHandler=function(e,t,a){e.addEventListener("click",function(){e.classList.contains("slider__toggle--current")||(currentToggle.classList.remove("slider__toggle--current"),currentToggle.removeAttribute("aria-label"),e.classList.add("slider__toggle--current"),e.setAttribute("aria-label","Текущий слайд "+(a+1)),currentSlide.classList.remove("slider__item--current"),t.classList.add("slider__item--current"),currentToggle=e,currentSlide=t)})},i=0;i<sliderToggles.length;i++)addToggledHandler(sliderToggles[i],slides[i],i);var modalOverlay=document.querySelector(".modal-overlay"),modalPopup=modalOverlay.querySelector(".modal-feedback"),modalForm=modalPopup.querySelector(".feedback-form"),modalOpenBtn=document.querySelector(".contacts__button"),modalCloseBtn=modalPopup.querySelector(".modal-feedback__close-button"),modalInputName=modalForm.querySelector('input[type="text"]'),modalInputEmail=modalForm.querySelector('input[type="email"]'),modalInputMsg=modalForm.querySelector("textarea"),fields=modalForm.querySelectorAll(".input"),keys={Tab:9,Esc:27},isStorageSupport=!0,storageName="",storageEmail="";try{storageName=localStorage.getItem("name"),storageEmail=localStorage.getItem("email")}catch(e){isStorageSupport=!1}var clearStatus=function(){for(var e=0;e<fields.length;e++)fields[e].classList.contains("input--error")&&fields[e].classList.remove("input--error"),fields[e].hasAttribute("aria-invalid")&&fields[e].removeAttribute("aria-invalid")};modalOpenBtn.addEventListener("click",function(e){e.preventDefault(),clearStatus(),modalOverlay.classList.add("modal-overlay--active"),storageName&&storageEmail?(modalInputName.value=storageName,modalInputEmail.value=storageEmail,modalInputMsg.focus()):modalInputName.focus(),window.addEventListener("keydown",function(e){e.keyCode===keys.Esc&&(e.preventDefault(),modalOverlay.classList.remove("modal-overlay--active"),modalOpenBtn.focus())})}),modalCloseBtn.addEventListener("click",function(e){e.preventDefault(),modalOverlay.classList.remove("modal-overlay--active"),modalOpenBtn.focus()}),modalCloseBtn.addEventListener("keydown",function(e){e.keyCode!==keys.Tab||e.shiftKey||(e.preventDefault(),modalInputName.focus())}),modalInputName.addEventListener("keydown",function(e){e.keyCode===keys.Tab&&e.shiftKey&&(e.preventDefault(),modalCloseBtn.focus())}),modalForm.addEventListener("submit",function(e){clearStatus();for(var t=0;t<fields.length;t++)if(!fields[t].value)return e.preventDefault(),fields[t].offsetWidth=fields[t].offsetWidth,fields[t].classList.add("input--error"),fields[t].setAttribute("aria-invalid","true"),void fields[t].focus();isStorageSupport&&(localStorage.setItem("name",modalInputName.value),localStorage.setItem("email",modalInputEmail.value))});
